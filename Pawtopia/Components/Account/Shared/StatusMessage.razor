@if (!string.IsNullOrEmpty(DisplayMessage))
{
    var isError = DisplayMessage.StartsWith("Error");
    var bgColor = isError ? "bg-red-50" : "bg-green-50";
    var textColor = isError ? "text-red-800" : "text-green-800";
    var borderColor = isError ? "border-red-200" : "border-green-200";
    var icon = isError ? "❌" : "✅";

    <div class="rounded-md @bgColor @borderColor border p-4 mb-6" role="alert">
        <div class="flex">
            <div class="flex-shrink-0">
                <span>@icon</span>
            </div>
            <div class="ml-3">
                <p class="text-sm font-medium @textColor">
                    @DisplayMessage
                </p>
            </div>
        </div>
    </div>
}

@code {
    private string? messageFromCookie;
    [Parameter] public string? Message { get; set; }
    [CascadingParameter] private HttpContext HttpContext { get; set; } = default!;
    private string? DisplayMessage => Message ?? messageFromCookie;

    protected override void OnInitialized()
    {
        messageFromCookie = HttpContext.Request.Cookies[IdentityRedirectManager.StatusCookieName];
        if (messageFromCookie is not null)
        {
            HttpContext.Response.Cookies.Delete(IdentityRedirectManager.StatusCookieName);
        }
    }
}